<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Webpage</title>
    <link rel="stylesheet" href="css/matrimony/profile.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PQLTG22ZFC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-PQLTG22ZFC');
</script>
    <style>
        .blog-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px; /* Space between the items */
        }
        .blog {
            flex: 1 1 calc(33.333% - 20px); /* For 3 columns with gap */
            box-sizing: border-box;
            border: 0px solid #ccc;
            padding: 100px;
            text-align: center;
        }
        @media (max-width: 768px) {
            .blog {
                flex: 1 1 calc(50% - 20px); /* For 2 columns with gap */
            }
        }
        .gender-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            z-index: 1000;
            width: 300px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .gender-buttons {
            display: flex;
            justify-content: space-around;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="headerPlaceholder"></div>

    <div class="blog-container" id="content">
        <!-- Static content -->
        <div class="blog" data-category="male">
            <a href="javascript:void(0)" onclick="showGenderOptions('male')">
                <i class="fas fa-male"></i>
                <h2>Create Profiles</h2>
            </a>
            <p>Profile details to be filled here.</p>
        </div>
    </div>
    
    <div class="gender-container" id="gender-container">
        <button class="close-btn" onclick="closeGenderOptions()">&times;</button>
        <h3>Select Gender</h3>
        <div class="gender-buttons" id="gender-buttons">
            <button onclick="selectGender('male')">Male</button>
            <button onclick="selectGender('female')">Female</button>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeGenderOptions()"></div>

    <script src="js/include.js"></script>
    <div id="footerPlaceholder"></div>

    <script>
        // Function to get a cookie value
        function getCookie(name) {
            let cookieArr = document.cookie.split(";");
            for (let i = 0; i < cookieArr.length; i++) {
                let cookiePair = cookieArr[i].split("=");
                if (name == cookiePair[0].trim()) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            return null;
        }

        // Function to check if user is logged in
        function checkLogin() {
            let token = getCookie('token');
            if (!token) {
                alert("To continue please login");
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // Function to set a cookie
        function setCookie(name, value, days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        // Function to generate a unique profile ID (UUID)
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Event listener for blog clicks
        document.querySelectorAll('.blog a').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!checkLogin()) {
                    e.preventDefault();
                    return;
                }
                var category = link.parentElement.getAttribute('data-category');
                var profileID = generateUUID(); // Generate unique profile ID
                setCookie('categories', category, 7); // Store category for 7 days
                setCookie('profile_id', profileID, 7); // Store profile ID for 7 days
                console.log(`Category: ${category}, Profile ID: ${profileID}`);
            });
        });

        // Close button functionality
        document.querySelector('.close-btn').addEventListener('click', () => {
            document.querySelector('.header').style.display = 'none';
        });

        function showGenderOptions(category) {
            const genderContainer = document.getElementById('gender-container');
            const overlay = document.getElementById('overlay');
            genderContainer.style.display = 'block';
            overlay.style.display = 'block';
            console.log(`Gender options for ${category}`);
        }

        function closeGenderOptions() {
            const genderContainer = document.getElementById('gender-container');
            const overlay = document.getElementById('overlay');
            genderContainer.style.display = 'none';
            overlay.style.display = 'none';
        }

        function selectGender(gender) {
            console.log(`Selected gender: ${gender}`);
            // Store selected gender in cookie
            setCookie('gender', gender, 7); // Store gender for 7 days

            // Redirect to the next page based on gender selection
            if (gender === 'male') {
                window.location.href = 'male.html';
            } else if (gender === 'female') {
                window.location.href = 'female.html';
            }
        }
    </script>
</body>
</html>
