<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>profile-Details</title>
	<link href="css/bootstrap.min.css" rel="stylesheet" >
	 <link href="fonts/css/fontawesome.min.css" rel="stylesheet" >
	<link href="fonts/css/brands.min.css" rel="stylesheet" />
     <link href="fonts/css/solid.min.css" rel="stylesheet" />
	<link href="css/global.css" rel="stylesheet">
	<link href="css/index.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #F0F0F0;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #333;
      color: #FFFFFF;
      padding: 15px 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .header .back-button {
      font-size: 24px;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    .header .back-button:hover {
      color: #BBBBBB;
    }
    .header .title {
      flex-grow: 1;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    .profile-container {
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .profile-photo-container {
      position: relative;
      width: 350px;
      height: 350px;
      overflow: hidden;
      border: 2px solid #000;
      margin-bottom: 20px;
    }
    .profile-photo {
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      transition: transform 0.3s ease-in-out;
    }
    .profile-photo:hover {
      transform: scale(1.1);
    }
    .profile-details {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 600px;
      margin-top: 20px;
      text-align: left;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .profile-details h2 {
      margin-top: 0;
      text-align: center;
    }
    .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #ddd;
      width: 100%;
    }
    .detail-item:last-child {
      border-bottom: none;
    }
    .label {
      font-weight: bold;
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .row .detail-item {
      width: 48%;
    }
    @media (min-width: 768px) {
      .profile-container {
        flex-direction: column;
        align-items: center;
      }
    }
    .back-button {
      margin-top: 20px;
      padding: 10px 20px;
     
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
    }
    .back-button:hover {
      background-color: #0056B3;
    }
    .slideshow-buttons {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
    }
    .slideshow-buttons button {
      background-color: rgba(0, 0, 0, 0.5);
      border: none;
      color: white;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
    }
    .slideshow-buttons button:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }
     /* Logo Image Styling */
.logo-img {
    width: 220px; /* Adjust size for desktop view */
    height: 75px;
}

@media (max-width: 768px) {
    .logo-img {
        max-width: 120px; /* Adjust size for mobile view */
    }
}

/* General styles for the detail items */
.detail-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
  background-color: #f9f9f9;
}

/* Style for labels */
.detail-item .label {
  font-weight: bold;
  width: 200px; /* Adjust width as needed */
  margin-right: 10px;
}

/* Style for the value labels */
.detail-item label:not(.label) {
  flex: 1;
  margin-right: 10px;
  color: #333;
}

/* Style for input fields */
.detail-item input[type="text"] {
  width: 200px; /* Adjust width as needed */
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 3px;
  font-size: 14px;
  color: #555;
}

/* Responsive styling */
@media (max-width: 768px) {
  .detail-item {
    flex-direction: column;
    align-items: flex-start;
  }

  .detail-item .label {
    width: auto;
    margin-bottom: 5px;
  }

  .detail-item input[type="text"] {
    width: 100%;
  }
}
/* General styling for the button */
#submitBtn {
    background-color: #4CAF50; /* Green background */
    border: none; /* Remove borders */
    color: white; /* White text */
    padding: 10px 20px; /* Add padding */
    text-align: center; /* Centered text */
    text-decoration: none; /* Remove underline */
    display: inline-block; /* Align with other elements */
    font-size: 16px; /* Increase font size */
    margin: 4px 2px; /* Add margin */
    cursor: pointer; /* Pointer cursor on hover */
    border-radius: 5px; /* Rounded corners */
    transition: background-color 0.3s ease; /* Smooth transition for background color */
}

/* Button hover effect */
#submitBtn:hover {
    background-color: #45a049; /* Darker green on hover */
}

/* Center the button for desktop and mobile */
.button-container {
    display: flex; /* Use flexbox */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    height: 20vh; /* Full viewport height */
    margin: 0; /* Remove default margin */
}

/* Media query for mobile view */
@media (max-width: 600px) {
    #submitBtn {
        width: 80%; /* Adjust button width for mobile */
        font-size: 14px; /* Slightly smaller font size on mobile */

    }
}

/* Media query for larger screens */
@media (min-width: 601px) {
    #submitBtn {
        width: auto; /* Default width for larger screens */
    }
}

  </style>
</head>
<body>
    

  <div class="header">
    <span class="back-button" onclick="goBack()">&#9664;</span>
    <div class="title">Profile Details</div>
  </div>
  <div id="profileDetails" class="profile-container"></div>
  <div class="button-container">
    <button id="submitBtn">Submit</button>
</div>


  <script>
    // Function to get a cookie by name
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function fetchProfileDetails(profileId) {
      const token = getCookie('token');
      const Email = getCookie('email');
      const decodedEmail = decodeURIComponent(Email); // Retrieve the token from cookies
      const myHeaders = new Headers();
      myHeaders.append("Authorization", token); // Use the token in the header
      myHeaders.append("Content-Type", "application/json");

      const raw = JSON.stringify({
    "profile_id": profileId,
    "email": decodedEmail // Use the decoded email in the payload
  });      const requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: raw,
        redirect: "follow"
      };
      fetch("https://api.itstrending.in:5001/api/v1/profiles/get_profile_details", requestOptions)
        .then(response => response.json())
        .then(result => {
          console.log(result.data.profile);
          displayProfileDetails(result.data.profile);
        })
        .catch(error => console.error('Error fetching profile details:', error));
    }
    
    function displayProfileDetails(profile) {
    const detailsContainer = document.getElementById('profileDetails');
    detailsContainer.innerHTML = '';
    const images = profile.images.split(',').map(img => img.trim().replace('{', '').replace('}', ''));

    const slideshowContainer = document.createElement('div');
    slideshowContainer.className = 'profile-photo-container';
    slideshowContainer.id = 'imagesContainer'; // Add an id here
    
    const slideshow = document.createElement('div');
    slideshow.className = 'profile-photo';
    slideshow.style.backgroundImage = `url('${images[0]}')`;
    slideshowContainer.appendChild(slideshow);
    
    const buttonsContainer = document.createElement('div');
    buttonsContainer.className = 'slideshow-buttons';
    const prevButton = document.createElement('button');
    prevButton.textContent = '◀';
    prevButton.onclick = () => showSlide(--currentSlide);
    const nextButton = document.createElement('button');
    nextButton.textContent = '▶';
    nextButton.onclick = () => showSlide(++currentSlide);
    buttonsContainer.appendChild(prevButton);
    buttonsContainer.appendChild(nextButton);
    slideshowContainer.appendChild(buttonsContainer);

    detailsContainer.appendChild(slideshowContainer);
    
    let currentSlide = 0;
    function showSlide(index) {
        if (index >= images.length) currentSlide = 0;
        else if (index < 0) currentSlide = images.length - 1;
        else currentSlide = index;
        slideshow.style.backgroundImage = `url('${images[currentSlide]}')`;
    }
    
    showSlide(currentSlide);



      const detailsCard = document.createElement('div');
      detailsCard.className = 'profile-details';
      detailsCard.innerHTML = `
<div class="detail-item">
  <label class="label">Name</label>
  <input type="text" id="slNoInput" value="${profile.field33 ? decodeURIComponent(profile.field33) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Date of Birth</label>
  <input type="text" id="profileCoordinatorNameInput" value="${profile.field6 ? decodeURIComponent(profile.field6) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Revert</label>
  <input type="text" id="profileStatusInput" value="${profile.field9 ? decodeURIComponent(profile.field9) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Gender</label>
  <input type="text" id="reasonForOnHoldInput" value="${profile.gender ? decodeURIComponent(profile.gender) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Follow</label>
  <input type="text" id="nameInput" value="${profile.field4 ? decodeURIComponent(profile.field4) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Phone Number</label>
  <input type="text" id="genderInput" value="${profile.field10 ? decodeURIComponent(profile.field10) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Native Language</label>
  <input type="text" id="ageInput" value="${profile.field11 ? decodeURIComponent(profile.field11) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Residence Language</label>
  <input type="text" id="heightInput" value="${profile.field13 ? decodeURIComponent(profile.field13) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Country</label>
  <input type="text" id="familySubcasteInput" value="${profile.field14 ? decodeURIComponent(profile.field14) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">State</label>
  <input type="text" id="followInput" value="${profile.field1 ? decodeURIComponent(profile.field1) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">City</label>
  <input type="text" id="maritalStatusInput" value="${profile.field7 ? decodeURIComponent(profile.field7) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Address</label>
  <input type="text" id="maritalTenureInput" value="${profile.field15 ? decodeURIComponent(profile.field15) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Marital Status</label>
  <input type="text" id="childrenInput" value="${profile.field3 ? decodeURIComponent(profile.field3) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Height</label>
  <input type="text" id="validDivorceDocumentInput" value="${profile.field17 ? decodeURIComponent(profile.field17) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Weight</label>
  <input type="text" id="educationInput" value="${profile.field18 ? decodeURIComponent(profile.field18) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">About Me</label>
  <input type="text" id="professionInput" value="${profile.field19 ? decodeURIComponent(profile.field19) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">About Family</label>
  <input type="text" id="companyInput" value="${profile.field20 ? decodeURIComponent(profile.field20) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Father's Name</label>
  <input type="text" id="jobLocationInput" value="${profile.field21 ? decodeURIComponent(profile.field21) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Father's Occupation</label>
  <input type="text" id="homeAddressInput" value="${profile.field22 ? decodeURIComponent(profile.field22) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Mother's Name</label>
  <input type="text" id="fathersNameInput" value="${profile.field23 ? decodeURIComponent(profile.field23) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Mother's Occupation</label>
  <input type="text" id="fathersOccupationInput" value="${profile.field24 ? decodeURIComponent(profile.field24) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Salary Range</label>
  <input type="text" id="mothersNameInput" value="${profile.field25 ? decodeURIComponent(profile.field25) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Education</label>
  <input type="text" id="mothersOccupationInput" value="${profile.field2 ? decodeURIComponent(profile.field2) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Profession</label>
  <input type="text" id="noOfSistersInput" value="${profile.field8 ? decodeURIComponent(profile.field8) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">How do you know Khurshid Imam</label>
  <input type="text" id="sistersMaritalStatusInput" value="${profile.field30 ? decodeURIComponent(profile.field30) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Contact Name</label>
  <input type="text" id="sistersOccupationInput" value="${profile.field31 ? decodeURIComponent(profile.field31) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Contact Phone Number</label>
  <input type="text" id="noOfBrothersInput" value="${profile.field32 ? decodeURIComponent(profile.field32) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Partner Revert</label>
  <input type="text" id="brothersMaritalStatusInput" value="${profile.field28 ? decodeURIComponent(profile.field28) : 'N/A'}">
</div>
<div class="detail-item">
  <label class="label">Partner Requirement</label>
  <input type="text" id="brothersOccupationInput" value="${profile.field29 ? decodeURIComponent(profile.field29) : 'N/A'}">
</div>




`;



      detailsContainer.appendChild(detailsCard);
    }
    
    function getProfileIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('profile_id');
    }
    
    function goBack() {
      window.history.back();
    }
    
    const profileId = getProfileIdFromUrl();
    if (profileId) {
      fetchProfileDetails(profileId);
    } else {
      document.getElementById('profileDetails').innerHTML = '<p>No profile ID found.</p>';
    }

    function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
}

const myHeaders = new Headers();
const token = getCookie('token'); // Replace 'yourCookieName' with the name of your cookie

if (token) {
    myHeaders.append("Authorization", token);
} else {
    console.error("Token not found in cookies.");
}

myHeaders.append("Content-Type", "application/json");

document.getElementById('submitBtn').addEventListener('click', function() {
    // Fetching values from input fields
    const slnoValue = document.getElementById('slNoInput').value;
const dobValue = document.getElementById('profileCoordinatorNameInput').value;
const profileStatusValue = document.getElementById('profileStatusInput').value;
const reasonForOnHoldValue = document.getElementById('reasonForOnHoldInput').value;
const nameValue = document.getElementById('nameInput').value;
const genderValue = document.getElementById('genderInput').value;
const ageValue = document.getElementById('ageInput').value;
const heightValue = document.getElementById('heightInput').value;
const familySubcasteValue = document.getElementById('familySubcasteInput').value;
const followValue = document.getElementById('followInput').value;
const maritalStatusValue = document.getElementById('maritalStatusInput').value;
const maritalTenureValue = document.getElementById('maritalTenureInput').value;
const childrenValue = document.getElementById('childrenInput').value;
const validDivorceDocumentValue = document.getElementById('validDivorceDocumentInput').value;
const educationValue = document.getElementById('educationInput').value;
const professionValue = document.getElementById('professionInput').value;
const companyValue = document.getElementById('companyInput').value;
const jobLocationValue = document.getElementById('jobLocationInput').value;
const homeAddressValue = document.getElementById('homeAddressInput').value;
const fathersNameValue = document.getElementById('fathersNameInput').value;
const fathersOccupationValue = document.getElementById('fathersOccupationInput').value;
const mothersNameValue = document.getElementById('mothersNameInput').value;
const mothersOccupationValue = document.getElementById('mothersOccupationInput').value;
const noOfSistersValue = document.getElementById('noOfSistersInput').value;
const sistersMaritalStatusValue = document.getElementById('sistersMaritalStatusInput').value;
const sistersOccupationValue = document.getElementById('sistersOccupationInput').value;
const noOfBrothersValue = document.getElementById('noOfBrothersInput').value;
const brothersMaritalStatusValue = document.getElementById('brothersMaritalStatusInput').value;
const brothersOccupationValue = document.getElementById('brothersOccupationInput').value;
const preferredFamilySubcasteValue = document.getElementById('preferredFamilySubcasteInput').value;
const preferredEducationValue = document.getElementById('preferredEducationInput').value;
const preferredProfessionValue = document.getElementById('preferredProfessionInput').value;
const preferredAgeValue = document.getElementById('preferredAgeInput').value;
const preferredHeightValue = document.getElementById('preferredHeightInput').value;
const religiousAttributesValue = document.getElementById('religiousAttributesInput').value;
const personalAttributeValue = document.getElementById('personalAttributeInput').value;
const preferredFollowPracticeValue = document.getElementById('preferredFollowPracticeInput').value;
const familyTypeValue = document.getElementById('familyTypeInput').value;
const preferredLocationValue = document.getElementById('preferredLocationInput').value;
const partnerWorkingStatusValue = document.getElementById('partnerWorkingStatusInput').value;
    const images = document.getElementById('imagesContainer').value;

    const raw = JSON.stringify({
        "profile_id": profileId, // Ensure `profileId` is defined
        "description": "",
        "gender": gender,
        "images": images,
        "bio": "",
        "field1": slnoValue,
        "field2": dobValue,
        "field3": maritalStatus,
        "field4": follow,
        "field5": name,
        "field6": age,
        "field7": homeAddress,
        "field8": familySubcaste,
        "field9": profession,
        "field10": profileCoordinatorName,
        "field11": profileStatus,
        "field12": "",
        "field13": reasonForOnHold,
        "field14": height,
        "field15": maritalTenure,
        "field16": children,
        "field17": "",
        "field18": company,
        "field19": jobLocation,
        "field20": fathersName,
        "field21": fathersOccupation,
        "field22": mothersName,
        "field23": mothersOccupation,
        "field24": noOfSisters,
        "field25": noOfBrothers,
        "field26": preferredFamilySubcaste,
        "field27": preferredEducation,
        "field28": preferredProfession,
        "field29": preferredAge,
        "field30": preferredHeight,
        "field31": personalAttribute,
        "field32": preferredFollowPractice,
        "field33": familyType,
        "field34": preferredLocation,
        "field35": religiousAttributes,
        "field36": partnerWorkingStatus,
        "field37": sistersMaritalStatus,
        "field38": sistersOccupation,
        "field39": brothersMaritalStatus,
        "field40": brothersOccupation,
        "field41": "",
        "field42": "",
        "field43": "",
        "field44": "",
        "field45": "",
        "field46": "",
        "field47": "",
        "field48": "",
        "field49": "",
        "field50": ""
    });

    const requestOptions = {
        method: "PUT",
        headers: myHeaders,
        body: raw,
        redirect: "follow"
    };

    fetch("https://api.itstrending.in:5001/api/v1/profiles", requestOptions)
        .then((response) => response.text())
        .then((result) => console.log(result))
        .catch((error) => console.error(error));

    console.log(raw); 
    // To see the JSON object in the console
    console.log(profileId);
});

function handleSubmit() {
    // Show the alert message
    alert('Profile updated successfully');
    
    // Reload the page after the user clicks OK
    location.reload();
}

window.onload = function() {
    // Attach the event handler to the submit button
    const submitButton = document.getElementById('submitBtn');
    submitButton.addEventListener('click', handleSubmit);
};


    // Import required modules
const express = require('express');
const cors = require('cors');
const bodyParser = require('body-parser');

// Initialize Express app
const app = express();

// CORS middleware
app.use(cors());

// Middleware to parse JSON bodies
app.use(bodyParser.json());

// Define your API endpoints here
app.post('/api/v1/profiles/get_profile_details', (req, res) => {
  // Example logic for handling profile details
  const profileId = req.body.profile_id;

  // Simulate a profile object based on profileId (replace with actual logic)
  const profile = {
    field1: 'John Doe',
    field2: '01/01/1990',
    field3: 'Brahmin',
    field4: 'Yes',
    field5: '123-456-7890',
    field6: 'Kannada',
    field7: 'English',
    field8: 'Reading, Traveling',
    field9: 'India',
    field10: 'Karnataka',
    field11: 'Bengaluru',
    images: 'http://example.com/image1.jpg,http://example.com/image2.jpg,http://example.com/image3.jpg'
  };

  // Send the profile object as a response
  res.json({ status: 'success', data: { profile } });
});

// Define additional API endpoints if needed

// Start your server
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}`);
});

  </script>
</body>
</html>