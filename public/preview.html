<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Details</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
</script>

<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .container {
            background-color: #f0f0f0;
            padding: 20px;
        }
        .form-col {
            margin-bottom: 20px;
        }
        .form-label {
            font-weight: bold;
        }
        .section {
            margin-bottom: 20px;
        }
        .content {
            margin-bottom: 10px;
        }
        .label-box {
            font-weight: bold;
        }
        .empty-box {
            border: 1px solid #ccc;
            padding: 10px;
            height: 50px;
            background-color: #fff;
        }
        .form-control[readonly] {
            background-color: #e9ecef;
        }
        body {
        margin: 0;
        font-family: Arial, sans-serif;
    }

    .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: #f7f7f7;
        background-image: linear-gradient(to right, #1E90FF, #f7f7f7);    }

    .logo img {
        height: 80px;
    }

    .nav-icons img {
        height: 50px;
        margin-left: 15px;
    }

    input {
        border: 1px solid red;
        /* Light black border */
        border-radius: 4px;
        /* Optional: for rounded corners */
        padding: 5px;
        /* Optional: to add some padding inside the input */
    }

    @media screen and (max-width: 600px) {
        .navbar {
            justify-content: space-between;
            padding: 10px;
        }

        .logo img {
            height: 50px;
        }

        .nav-icons img {
            margin-left: 8px;
            height: 30px;
        }
    }

    /* headr */
    @media (max-width: 600px) {
        .table {
            width: 100%;
        }
    }
     /* Print Styles */
     @media print {
            .navbar-toggler, #printButton {
                display: none;
            }
        }

        /* Button Container */
        .button-container {
            display: flex;
            justify-content: center;
            margin: 10px;
        }

        #printButton {
            font-size: 16px;
            padding: 10px 20px;
        }

        @media (max-width: 768px) {
            .button-container {
                flex-direction: column;
                align-items: center;
            }

            #printButton {
                margin: 10px 0;
                font-size: 14px;
                padding: 8px 16px;
            }
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #f7f7f7;
            /* background-image: linear-gradient(to right, #1E90FF, #f7f7f7); */
        }

        .logo img,
        .nav-icons img {
            display: none; /* Hide images on the page */
        }

        input {
            border: 1px solid red;
            border-radius: 4px;
            padding: 5px;
        }

        @media screen and (max-width: 600px) {
            .navbar {
                justify-content: space-between;
                padding: 10px;
            }
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #f7f7f7;
        }

        .logo img,
        .nav-icons img {
            display: none; /* Hide images on the page */
        }

        input {
            border: 1px solid red;
            border-radius: 4px;
            padding: 5px;
        }

        @media screen and (max-width: 600px) {
            .navbar {
                justify-content: space-between;
                padding: 10px;
            }
        }

        #qrcode {
            width: 160px;
            height: 160px;
            margin: 20px auto;
            padding: 10px;
            border: 2px solid #333;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #downloadLink {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

    </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">
        <img src="img/comapny log2.jpg" alt="Left Logo">
    </div>
    <div class="nav-icons">
        <img src="img/mms.jpg" alt="Logo 1">
        <img src="img/EGAC.png" alt="Logo 2">
        <img src="img/IAF.png" alt="Logo 3">
        <img src="img/NABCB.png" alt="Logo 4">
    </div>
</nav>
<nav class="navbar navbar-expand-md navbar-light bg-light">
<div class="container-fluid">
<!-- Left section: Toggler button for mobile view -->
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"></span>
</button>

<!-- Center section: Logo -->
<div class="header-left mb-3 mb-md-0">
  <!-- <img src="comapny log2.jpg" alt="Logo" class="img-fluid logo-img" style="max-width: 200px;"> -->
</div>

<!-- Right section: Navbar links -->
<div class="collapse navbar-collapse" id="navbarNav">
  <ul class="navbar-nav ms-auto">
    <li class="nav-item dropdown me-2">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownPages" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Pages
      </a>
      <ul class="dropdown-menu" aria-labelledby="navbarDropdownPages">
        <li><a class="dropdown-item" href="installationform1.html">Installation Form</a></li>
        <li><a class="dropdown-item" href="GeneralServiceForm1.html">General Service Form</a></li>
        <!-- <li><a class="dropdown-item" href="vehicleOwner.html">Vehicle Owner Information Form</a></li> -->
      </ul>
    </li>
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownReport" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Report Page
      </a>
      <ul class="dropdown-menu" aria-labelledby="navbarDropdownReport">
        <li><a class="dropdown-item" href="installationreport.html">Installation Report</a></li>
        <li><a class="dropdown-item" href="report2.html">General Service Report</a></li>
        <!-- <li><a class="dropdown-item" href="vechicalOwner.html">Vehicle Owner Information Report</a></li> -->
      </ul>
    </li>
  </ul>
</div>
</div>
</nav>





<!-- Main Content -->
<main class="container my-5">
    <!-- Existing Table -->
    <table class="table table-bordered table-container">
        <tbody>
            <tr>
              <td class="text-center" id="repNo"> </td>
              <td class="text-center"><u>INSTALLATION REPORT</u></td>
                <td class="text-center">
                    <p id="reportDate">Report Date</p>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- New Table 1 -->
    <table class="table table-bordered">
        <tbody>
            <tr>
                <td>
                    <div class="form-col">
                        <div class="form-group">
                            <div class="form-group-content">
                                <label for="customerNamePreview" class="form-label">Customer Name:</label>
                                <input type="text" class="form-control" id="customerNamePreview" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group-content">
                                <label for="customerProjectPreview" class="form-label">Project:</label>
                                <input type="text" class="form-control" id="customerProjectPreview" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group-content">
                                <label for="poNoDatePreview" class="form-label">P.O No. & Date:</label>
                                <input type="text" class="form-control" id="poNoDatePreview" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group-content">
                                <label for="invoiceNoDatePreview" class="form-label">Invoice No & Date :</label>
                                <input type="text" class="form-control" id="invoiceNoDatePreview" readonly>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="form-col">
                        <div class="form-group row">
                            <label for="vehicleModelPreview" class="col-sm-6 col-form-label form-label">Vehicle Model:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="vehicleModelPreview" readonly>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="vehicleSlNoPreview" class="col-sm-6 col-form-label form-label">Vehicle SL No:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="vehicleSlNoPreview" readonly>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="eqptTypePreview" class="col-sm-6 col-form-label form-label">Type Of Equipment:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="eqptTypePreview" readonly>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="eqptSlNoPreview" class="col-sm-6 col-form-label form-label">Equipment SL No:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="eqptSlNoPreview" readonly>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="installationHRMPreview" class="col-sm-6 col-form-label form-label">Installation HMR:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="installationHRMPreview" readonly>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="failureHMRPreview" class="col-sm-6 col-form-label form-label">Failure HMR:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="failureHMRPreview" readonly>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</main>


<div class="container">
   

<div class="section">
    <h2>1. Welding of MS Parts</h2>
    <div class="content">
        <div class="label-box">
            <label>DCP Cylinder Mounting Bracket - 50/20</label>
        </div>
        <div class="empty-box" id="dcpCylinderMountingBracket"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Distributor Pad</label>
        </div>
        <div class="empty-box" id="distributorPad"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Nozzle Bracket</label>
        </div>
        <div class="empty-box" id="nozzleBracket"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Automatic Actuator Bracket Pad</label>
        </div>
        <div class="empty-box" id="automaticActuatorBracketPad"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Manual Actuator Bracket Pad</label>
        </div>
        <div class="empty-box" id="manualActuatorBracketPad"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Control Unit Pad</label>
        </div>
        <div class="empty-box" id="controlUnitPad"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Sensor Wire Routing Bosses 8MM</label>
        </div>
        <div class="empty-box" id="sensorWireRoutingBosses"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Fitment of DCP Cylinder - 50/25</label>
        </div>
        <div class="empty-box" id="fitmentOfDcpCylinder"></div>
    </div>
</div>

<div class="section">
    <h2>2. Fitment of all Nozzles</h2>
    <div class="content">
        <div class="label-box">
            <label>Fitment of Nozzles along with protective caps</label>
        </div>
        <div class="empty-box" id="fitmentOfNozzlesProtectiveCaps"></div>
    </div>
</div>

<div class="section">
    <h2>3. Fitment of Nitrogen Cartridge</h2>
    <div class="content">
        <div class="label-box">
            <label>Fitment of Nitrogen Cartridge along with protective caps</label>
        </div>
        <div class="empty-box" id="fitmentOfNitrogenCartridgeProtectiveCaps"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Nitrogen Cartridge inside the cabin</label>
        </div>
        <div class="empty-box" id="nitrogenCartridgeInsideCabin"></div>
    </div>
</div>

<div class="section">
    <h2>4. Fitment of all Hoses</h2>
    <div class="content">
        <div class="label-box">
            <label>3/4"R2, 1/2"R2, 1/4"R2 Hose</label>
        </div>
        <div class="empty-box" id="hoseDetails"></div>
    </div>
</div>

<div class="section">
    <h2>5. Electrical Connections</h2>
    <div class="content">
        <div class="label-box">
            <label>Sensor Wire Routing</label>
        </div>
        <div class="empty-box" id="sensorWireRouting"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Control Unit Connections Sensor</label>
        </div>
        <div class="empty-box" id="controlUnitConnectionsSensor"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Wire Adaptor Battery Connections</label>
        </div>
        <div class="empty-box" id="wireAdaptorBatteryConnections"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Control Unit Start</label>
        </div>
        <div class="empty-box" id="controlUnitStart"></div>
    </div>
    <div class="content">
        <div class="label-box">
            <label>Power OK LED</label>
        </div>
        <div class="empty-box" id="powerOkLed"></div>
    </div>
</div>

<div class="section">
    <h2>6. Product Details</h2>
    <div class="content">
        <div class="label-box">
            <label>Product Details</label>
        </div>
        <input type="text" class="form-control" id="product" readonly>
    </div>
</div>

<div class="section">
    <h2>7. Additional Information</h2>
    <div class="form-group row">
        <label for="forUee" class="col-sm-6 col-form-label form-label">For UEE:</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" id="forUee" readonly>
        </div>
    </div>
    <div class="form-group row">
        <label for="forCustomer" class="col-sm-6 col-form-label form-label">For Customer:</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" id="forCustomer" readonly>
        </div>
    </div>
</div>

<nav class="">
    <div class="logo">
        <img src="img/comapny log2.jpg" alt="Left Logo" id="logo1">
    </div>
    <div class="nav-icons">
        <img src="img/mms.jpg" alt="Logo 1" id="logo2">
        <img src="img/EGAC.png" alt="Logo 2" id="logo3">
        <img src="img/IAF.png" alt="Logo 3" id="logo4">
        <img src="img/NABCB.png" alt="Logo 4" id="logo5">
    </div>
</nav>

<div id="downloadLink">
    <a id="pdfLink" href="" target="_blank">
        <div id="qrcode"></div>
    </a>
</div>
<div class="button-container">
  <button id="printButton" onclick="window.print()">Print</button>
</div>
</div>
<!-- Include Bootstrap JavaScript and dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
// Function to get a cookie by its name
function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
    return null;
}

// Function to display form data from cookies
function displayFormData() {
    document.getElementById('customerNamePreview').value = decodeURIComponent(getCookie('field1') || 'Not Available');
    document.getElementById('customerProjectPreview').value = decodeURIComponent(getCookie('field3') || 'Not Available');
    document.getElementById('poNoDatePreview').value = decodeURIComponent(getCookie('field4') || 'Not Available');
    document.getElementById('invoiceNoDatePreview').value = decodeURIComponent(getCookie('field9') || 'Not Available');
    document.getElementById('vehicleModelPreview').value = decodeURIComponent(getCookie('field5') || 'Not Available');
    document.getElementById('vehicleSlNoPreview').value = decodeURIComponent(getCookie('field6') || 'Not Available');
    document.getElementById('eqptTypePreview').value = decodeURIComponent(getCookie('field7') || 'Not Available');
    document.getElementById('eqptSlNoPreview').value = decodeURIComponent(getCookie('field8') || 'Not Available');
    document.getElementById('installationHRMPreview').value = decodeURIComponent(getCookie('field10') || 'Not Available');
    document.getElementById('failureHMRPreview').value = decodeURIComponent(getCookie('field11') || 'Not Available');

    document.getElementById('dcpCylinderMountingBracket').textContent = decodeURIComponent(getCookie('field13') || 'Not Available');
    document.getElementById('distributorPad').textContent = decodeURIComponent(getCookie('field14') || 'Not Available');
    document.getElementById('nozzleBracket').textContent = decodeURIComponent(getCookie('field15') || 'Not Available');
    document.getElementById('automaticActuatorBracketPad').textContent = decodeURIComponent(getCookie('field16') || 'Not Available');
    document.getElementById('manualActuatorBracketPad').textContent = decodeURIComponent(getCookie('field17') || 'Not Available');
    document.getElementById('controlUnitPad').textContent = decodeURIComponent(getCookie('field18') || 'Not Available');
    document.getElementById('sensorWireRoutingBosses').textContent = decodeURIComponent(getCookie('field19') || 'Not Available');
    document.getElementById('fitmentOfDcpCylinder').textContent = decodeURIComponent(getCookie('field20') || 'Not Available');
    document.getElementById('fitmentOfNozzlesProtectiveCaps').textContent = decodeURIComponent(getCookie('field21') || 'Not Available');
    document.getElementById('fitmentOfNitrogenCartridgeProtectiveCaps').textContent = decodeURIComponent(getCookie('field22') || 'Not Available');
    document.getElementById('nitrogenCartridgeInsideCabin').textContent = decodeURIComponent(getCookie('field23') || 'Not Available');
    document.getElementById('hoseDetails').textContent = decodeURIComponent(getCookie('field24') || 'Not Available');
    document.getElementById('sensorWireRouting').textContent = decodeURIComponent(getCookie('field25') || 'Not Available');
    document.getElementById('controlUnitConnectionsSensor').textContent = decodeURIComponent(getCookie('field26') || 'Not Available');
    document.getElementById('wireAdaptorBatteryConnections').textContent = decodeURIComponent(getCookie('field28') || 'Not Available');
    document.getElementById('controlUnitStart').textContent = decodeURIComponent(getCookie('controlUnitStart') || '');
    document.getElementById('powerOkLed').textContent = decodeURIComponent(getCookie('field29') || 'Not Available');
    document.getElementById('product').value = decodeURIComponent(getCookie('field32') || '');

    document.getElementById('forUee').value = decodeURIComponent(getCookie('field30') || '');
    document.getElementById('forCustomer').value = decodeURIComponent(getCookie('field31') || '');
}

// Call the function to display form data when the page loads
document.addEventListener('DOMContentLoaded', displayFormData);


// Function to get a cookie by name
function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
}

// Get the value from the cookie and set it as the text content of the <td>
document.getElementById('repNo').textContent = decodeURIComponent(getCookie('field2') || '');

 function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
        return ''; // Return an empty string if the cookie is not found
    }

    async function createPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Temporarily display images for PDF generation
        const images = document.querySelectorAll('.logo img, .nav-icons img');
        images.forEach(img => img.style.display = 'block');

        // Define styles
        const margin = 20;
        const pageWidth = doc.internal.pageSize.width;
        const pageHeight = doc.internal.pageSize.height;
        const lineHeight = 10;

        // Define fonts and sizes
        doc.setFont('Arial', 'normal');
        doc.setFontSize(16);
        doc.setTextColor(85, 85, 85); // Dark grey color for text

        // Header with logo images
        const logo1 = getBase64Image(document.getElementById('logo1'));
        const logo2 = getBase64Image(document.getElementById('logo2'));
        const logo3 = getBase64Image(document.getElementById('logo3'));
        const logo4 = getBase64Image(document.getElementById('logo4'));
        const logo5 = getBase64Image(document.getElementById('logo5'));

        // Define image sizes and positions
        const imageWidth = 30; // Width of the images in PDF
        const imageHeight = 15; // Height of the images in PDF
        const imagePadding = 10; // Padding between images

        // Add navbar with images
        let xOffset = 10; // Starting x position
        const yPosition = 10; // y position for images

        doc.addImage(logo1, 'JPEG', xOffset, yPosition, imageWidth, imageHeight);
        xOffset += imageWidth + imagePadding;
        doc.addImage(logo2, 'JPEG', xOffset, yPosition, imageWidth, imageHeight);
        xOffset += imageWidth + imagePadding;
        doc.addImage(logo3, 'JPEG', xOffset, yPosition, imageWidth, imageHeight);
        xOffset += imageWidth + imagePadding;
        doc.addImage(logo4, 'JPEG', xOffset, yPosition, imageWidth, imageHeight);
        xOffset += imageWidth + imagePadding;
        doc.addImage(logo5, 'JPEG', xOffset, yPosition, imageWidth, imageHeight);

        // Add content
        doc.setFontSize(14);
        doc.setTextColor(0, 0, 0); // Black color for content text

        const content = `
Invoice Number & Date: ${getCookie('field9') || 'Not provided'}
Customer Name & Details: ${getCookie('field1') || 'Not provided'}
Product Details: ${getCookie('field32') || 'Not provided'}
Vehicle Model & Quantity: ${getCookie('field5') || 'Not provided'}
Date of Installation: ${getCookie('field4') || 'Not provided'}
Rep No: ${getCookie('field2') || 'Not provided'}

Warranty Details:
1) One-year Warranty effective from the purchase date.
2) Warranty covers any manufacturing technical defects excluding breakage.
3) Warranty void if repairing without our consent or warranty seal is broken.
4) The warranty does not cover faults resulting from operation, careless handling, or not following instructions. Also, electric shock cases.
    `;

        const lines = doc.splitTextToSize(content, pageWidth - 2 * margin);
        let lineIndex = 0;

        while (lineIndex < lines.length) {
            // Add page content
            const currentPageLines = lines.slice(lineIndex, lineIndex + Math.floor((pageHeight - 2 * margin) / lineHeight));
            doc.text(currentPageLines, margin, margin + lineHeight);

            // Check if more pages are needed
            if (lineIndex + Math.floor((pageHeight - 2 * margin) / lineHeight) < lines.length) {
                doc.addPage();
            }
            lineIndex += Math.floor((pageHeight - 2 * margin) / lineHeight);
        }

        const pdfBlob = doc.output('blob');
        const pdfUrl = URL.createObjectURL(pdfBlob);

        // Hide images again after PDF generation
        images.forEach(img => img.style.display = 'none');

        console.log('Generated PDF URL:', pdfUrl);
        return pdfUrl;
    }

    function getBase64Image(imgElement) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = imgElement.naturalWidth;
        canvas.height = imgElement.naturalHeight;
        ctx.drawImage(imgElement, 0, 0);
        return canvas.toDataURL('image/jpeg');
    }

    async function generateQRCode() {
        const pdfUrl = await createPDF();

        // Display the link to download or view the PDF
        const linkElement = document.getElementById('pdfLink');
        linkElement.href = pdfUrl;
        document.getElementById('downloadLink').style.display = 'block';

        // Generate the QR code
        document.getElementById("qrcode").innerHTML = "";
        new QRCode(document.getElementById("qrcode"), {
            text: pdfUrl,
            width: 160,
            height: 160,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.L
        });
    }

    window.onload = function() {
        generateQRCode();

        // Make an XMLHttpRequest to retrieve and log headers
        var req = new XMLHttpRequest();
        req.open('GET', document.location, true);
        req.send(null);
        req.onload = function() {
            var headers = req.getAllResponseHeaders().toLowerCase();
            console.log('Response Headers:', headers);
        };
    };

    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
        return '';
    }


    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
        return '';
    }

// Function to get cookie value by name
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}

// Retrieve the token from cookies
const authToken = getCookie('token'); // Replace 'authToken' with the actual cookie name

// Retrieving values for fields from cookies
const fields = {};
for (let i = 1; i <= 42; i++) {
  fields[`field${i}`] = getCookie(`field${i}`) || ""; // Retrieve field from cookie or set as empty string
}

// Preparing the request body with cookie values
const raw = JSON.stringify({
  "profile_id": "1",
  "description": "",
  "gender": "",
  "images": "",
  "bio": "",
  ...fields, // Spread the fields object to include field1 to field40
  "field43": "",
  "field44": "",
  "field45": "",
  "field46": "",
  "field47": "",
  "field48": "",
  "field49": "",
  "field50": ""
});

const myHeaders = new Headers();
myHeaders.append("Authorization", authToken); // Use the token from cookies
myHeaders.append("Content-Type", "application/json");

const requestOptions = {
  method: "POST",
  headers: myHeaders,
  body: raw,
  redirect: "follow"
};

// Correcting the URL by removing the extra "https://"
fetch("https://api2.itstrending.in/api/v1/profiles", requestOptions)
  .then((response) => response.text())
  .then((result) => console.log(result))
  .catch((error) => console.error('Fetch error:', error));



</script>
<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
